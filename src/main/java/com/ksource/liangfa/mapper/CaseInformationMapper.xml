<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.ksource.liangfa.mapper.CaseInformationMapper" >
  <resultMap id="BaseResultMap" type="com.ksource.liangfa.domain.CaseInformation" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jul 05 08:36:54 CST 2016.
    -->
    <id column="INFO_ID" property="infoId" jdbcType="DECIMAL" />
    <result column="TITLE" property="title" jdbcType="VARCHAR" />
    <result column="CASE_NO" property="caseNo" jdbcType="VARCHAR" />
    <result column="CASE_NAME" property="caseName" jdbcType="VARCHAR" />
    <result column="OPINION_DATE" property="opinionDate" jdbcType="TIMESTAMP" />
    <result column="KEYWORD" property="keyword" jdbcType="VARCHAR" />
    <result column="INPUTER" property="inputer" jdbcType="DECIMAL" />
    <result column="INPUT_TIME" property="inputTime" jdbcType="TIMESTAMP" />
    <result column="ATTACHMENT" property="attachment" jdbcType="DECIMAL" />
    <result column="SOURCE" property="source" jdbcType="VARCHAR" />
    <result column="HAPPENED_TIME" property="happenedTime" jdbcType="TIMESTAMP" />
  </resultMap>
  <resultMap id="ResultMapWithBLOBs" type="com.ksource.liangfa.domain.CaseInformation" extends="BaseResultMap" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jul 05 08:36:54 CST 2016.
    -->
    <result column="CONTENT" property="content" jdbcType="CLOB" />
  </resultMap>
  <sql id="Example_Where_Clause" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jul 05 08:36:54 CST 2016.
    -->
    <where >
      <foreach collection="oredCriteria" item="criteria" separator="or" >
        <if test="criteria.valid" >
          <trim prefix="(" suffix=")" prefixOverrides="and" >
            <foreach collection="criteria.criteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jul 05 08:36:54 CST 2016.
    -->
    <where >
      <foreach collection="example.oredCriteria" item="criteria" separator="or" >
        <if test="criteria.valid" >
          <trim prefix="(" suffix=")" prefixOverrides="and" >
            <foreach collection="criteria.criteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jul 05 08:36:54 CST 2016.
    -->
    INFO_ID, TITLE, CASE_NO, CASE_NAME, OPINION_DATE, KEYWORD, INPUTER, INPUT_TIME, ATTACHMENT, 
    SOURCE, HAPPENED_TIME
  </sql>
  <sql id="Blob_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jul 05 08:36:54 CST 2016.
    -->
    CONTENT
  </sql>
  <select id="selectByExampleWithBLOBs" resultMap="ResultMapWithBLOBs" parameterType="com.ksource.liangfa.domain.CaseInformationExample" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jul 05 08:36:54 CST 2016.
    -->
    select
    <if test="distinct" >
      distinct
    </if>
    <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" />
    from CASE_INFORMATION
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null" >
      order by ${orderByClause}
    </if>
  </select>
  <select id="selectByExample" resultMap="BaseResultMap" parameterType="com.ksource.liangfa.domain.CaseInformationExample" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jul 05 08:36:54 CST 2016.
    -->
    select
    <if test="distinct" >
      distinct
    </if>
    <include refid="Base_Column_List" />
    from CASE_INFORMATION
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null" >
      order by ${orderByClause}
    </if>
  </select>
  <select id="selectByPrimaryKey" resultMap="ResultMapWithBLOBs" parameterType="Long" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jul 05 08:36:54 CST 2016.
    -->
    select 
    <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" />
    from CASE_INFORMATION
    where INFO_ID = #{infoId,jdbcType=DECIMAL}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="Long" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jul 05 08:36:54 CST 2016.
    -->
    delete from CASE_INFORMATION
    where INFO_ID = #{infoId,jdbcType=DECIMAL}
  </delete>
  <delete id="deleteByExample" parameterType="com.ksource.liangfa.domain.CaseInformationExample" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jul 05 08:36:54 CST 2016.
    -->
    delete from CASE_INFORMATION
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
  </delete>
  <insert id="insert" parameterType="com.ksource.liangfa.domain.CaseInformation" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jul 05 08:36:54 CST 2016.
    -->
    insert into CASE_INFORMATION (INFO_ID, TITLE, CASE_NO, 
      CASE_NAME, OPINION_DATE, KEYWORD, 
      INPUTER, INPUT_TIME, ATTACHMENT, 
      SOURCE, HAPPENED_TIME, CONTENT
      )
    values (#{infoId,jdbcType=DECIMAL}, #{title,jdbcType=VARCHAR}, #{caseNo,jdbcType=VARCHAR}, 
      #{caseName,jdbcType=VARCHAR}, #{opinionDate,jdbcType=TIMESTAMP}, #{keyword,jdbcType=VARCHAR}, 
      #{inputer,jdbcType=DECIMAL}, #{inputTime,jdbcType=TIMESTAMP}, #{attachment,jdbcType=DECIMAL}, 
      #{source,jdbcType=VARCHAR}, #{happenedTime,jdbcType=TIMESTAMP}, #{content,jdbcType=CLOB}
      )
  </insert>
  <insert id="insertSelective" parameterType="com.ksource.liangfa.domain.CaseInformation" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jul 05 08:36:54 CST 2016.
    -->
    insert into CASE_INFORMATION
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="infoId != null" >
        INFO_ID,
      </if>
      <if test="title != null" >
        TITLE,
      </if>
      <if test="caseNo != null" >
        CASE_NO,
      </if>
      <if test="caseName != null" >
        CASE_NAME,
      </if>
      <if test="opinionDate != null" >
        OPINION_DATE,
      </if>
      <if test="keyword != null" >
        KEYWORD,
      </if>
      <if test="inputer != null" >
        INPUTER,
      </if>
      <if test="inputTime != null" >
        INPUT_TIME,
      </if>
      <if test="attachment != null" >
        ATTACHMENT,
      </if>
      <if test="source != null" >
        SOURCE,
      </if>
      <if test="happenedTime != null" >
        HAPPENED_TIME,
      </if>
      <if test="content != null" >
        CONTENT,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="infoId != null" >
        #{infoId,jdbcType=DECIMAL},
      </if>
      <if test="title != null" >
        #{title,jdbcType=VARCHAR},
      </if>
      <if test="caseNo != null" >
        #{caseNo,jdbcType=VARCHAR},
      </if>
      <if test="caseName != null" >
        #{caseName,jdbcType=VARCHAR},
      </if>
      <if test="opinionDate != null" >
        #{opinionDate,jdbcType=TIMESTAMP},
      </if>
      <if test="keyword != null" >
        #{keyword,jdbcType=VARCHAR},
      </if>
      <if test="inputer != null" >
        #{inputer,jdbcType=DECIMAL},
      </if>
      <if test="inputTime != null" >
        #{inputTime,jdbcType=TIMESTAMP},
      </if>
      <if test="attachment != null" >
        #{attachment,jdbcType=DECIMAL},
      </if>
      <if test="source != null" >
        #{source,jdbcType=VARCHAR},
      </if>
      <if test="happenedTime != null" >
        #{happenedTime,jdbcType=TIMESTAMP},
      </if>
      <if test="content != null" >
        #{content,jdbcType=CLOB},
      </if>
    </trim>
  </insert>
  <select id="countByExample" parameterType="com.ksource.liangfa.domain.CaseInformationExample" resultType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jul 05 08:36:54 CST 2016.
    -->
    select count(*) from CASE_INFORMATION
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
  </select>
  <update id="updateByExampleSelective" parameterType="map" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jul 05 08:36:54 CST 2016.
    -->
    update CASE_INFORMATION
    <set >
      <if test="record.infoId != null" >
        INFO_ID = #{record.infoId,jdbcType=DECIMAL},
      </if>
      <if test="record.title != null" >
        TITLE = #{record.title,jdbcType=VARCHAR},
      </if>
      <if test="record.caseNo != null" >
        CASE_NO = #{record.caseNo,jdbcType=VARCHAR},
      </if>
      <if test="record.caseName != null" >
        CASE_NAME = #{record.caseName,jdbcType=VARCHAR},
      </if>
      <if test="record.opinionDate != null" >
        OPINION_DATE = #{record.opinionDate,jdbcType=TIMESTAMP},
      </if>
      <if test="record.keyword != null" >
        KEYWORD = #{record.keyword,jdbcType=VARCHAR},
      </if>
      <if test="record.inputer != null" >
        INPUTER = #{record.inputer,jdbcType=DECIMAL},
      </if>
      <if test="record.inputTime != null" >
        INPUT_TIME = #{record.inputTime,jdbcType=TIMESTAMP},
      </if>
      <if test="record.attachment != null" >
        ATTACHMENT = #{record.attachment,jdbcType=DECIMAL},
      </if>
      <if test="record.source != null" >
        SOURCE = #{record.source,jdbcType=VARCHAR},
      </if>
      <if test="record.happenedTime != null" >
        HAPPENED_TIME = #{record.happenedTime,jdbcType=TIMESTAMP},
      </if>
      <if test="record.content != null" >
        CONTENT = #{record.content,jdbcType=CLOB},
      </if>
    </set>
    <if test="_parameter != null" >
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExampleWithBLOBs" parameterType="map" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jul 05 08:36:54 CST 2016.
    -->
    update CASE_INFORMATION
    set INFO_ID = #{record.infoId,jdbcType=DECIMAL},
      TITLE = #{record.title,jdbcType=VARCHAR},
      CASE_NO = #{record.caseNo,jdbcType=VARCHAR},
      CASE_NAME = #{record.caseName,jdbcType=VARCHAR},
      OPINION_DATE = #{record.opinionDate,jdbcType=TIMESTAMP},
      KEYWORD = #{record.keyword,jdbcType=VARCHAR},
      INPUTER = #{record.inputer,jdbcType=DECIMAL},
      INPUT_TIME = #{record.inputTime,jdbcType=TIMESTAMP},
      ATTACHMENT = #{record.attachment,jdbcType=DECIMAL},
      SOURCE = #{record.source,jdbcType=VARCHAR},
      HAPPENED_TIME = #{record.happenedTime,jdbcType=TIMESTAMP},
      CONTENT = #{record.content,jdbcType=CLOB}
    <if test="_parameter != null" >
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExample" parameterType="map" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jul 05 08:36:54 CST 2016.
    -->
    update CASE_INFORMATION
    set INFO_ID = #{record.infoId,jdbcType=DECIMAL},
      TITLE = #{record.title,jdbcType=VARCHAR},
      CASE_NO = #{record.caseNo,jdbcType=VARCHAR},
      CASE_NAME = #{record.caseName,jdbcType=VARCHAR},
      OPINION_DATE = #{record.opinionDate,jdbcType=TIMESTAMP},
      KEYWORD = #{record.keyword,jdbcType=VARCHAR},
      INPUTER = #{record.inputer,jdbcType=DECIMAL},
      INPUT_TIME = #{record.inputTime,jdbcType=TIMESTAMP},
      ATTACHMENT = #{record.attachment,jdbcType=DECIMAL},
      SOURCE = #{record.source,jdbcType=VARCHAR},
      HAPPENED_TIME = #{record.happenedTime,jdbcType=TIMESTAMP}
    <if test="_parameter != null" >
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByPrimaryKeySelective" parameterType="com.ksource.liangfa.domain.CaseInformation" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jul 05 08:36:54 CST 2016.
    -->
    update CASE_INFORMATION
    <set >
      <if test="title != null" >
        TITLE = #{title,jdbcType=VARCHAR},
      </if>
      <if test="caseNo != null" >
        CASE_NO = #{caseNo,jdbcType=VARCHAR},
      </if>
      <if test="caseName != null" >
        CASE_NAME = #{caseName,jdbcType=VARCHAR},
      </if>
      <if test="opinionDate != null" >
        OPINION_DATE = #{opinionDate,jdbcType=TIMESTAMP},
      </if>
      <if test="keyword != null" >
        KEYWORD = #{keyword,jdbcType=VARCHAR},
      </if>
      <if test="inputer != null" >
        INPUTER = #{inputer,jdbcType=DECIMAL},
      </if>
      <if test="inputTime != null" >
        INPUT_TIME = #{inputTime,jdbcType=TIMESTAMP},
      </if>
      <if test="attachment != null" >
        ATTACHMENT = #{attachment,jdbcType=DECIMAL},
      </if>
      <if test="source != null" >
        SOURCE = #{source,jdbcType=VARCHAR},
      </if>
      <if test="happenedTime != null" >
        HAPPENED_TIME = #{happenedTime,jdbcType=TIMESTAMP},
      </if>
      <if test="content != null" >
        CONTENT = #{content,jdbcType=CLOB},
      </if>
    </set>
    where INFO_ID = #{infoId,jdbcType=DECIMAL}
  </update>
  <update id="updateByPrimaryKeyWithBLOBs" parameterType="com.ksource.liangfa.domain.CaseInformation" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jul 05 08:36:54 CST 2016.
    -->
    update CASE_INFORMATION
    set TITLE = #{title,jdbcType=VARCHAR},
      CASE_NO = #{caseNo,jdbcType=VARCHAR},
      CASE_NAME = #{caseName,jdbcType=VARCHAR},
      OPINION_DATE = #{opinionDate,jdbcType=TIMESTAMP},
      KEYWORD = #{keyword,jdbcType=VARCHAR},
      INPUTER = #{inputer,jdbcType=DECIMAL},
      INPUT_TIME = #{inputTime,jdbcType=TIMESTAMP},
      ATTACHMENT = #{attachment,jdbcType=DECIMAL},
      SOURCE = #{source,jdbcType=VARCHAR},
      HAPPENED_TIME = #{happenedTime,jdbcType=TIMESTAMP},
      CONTENT = #{content,jdbcType=CLOB}
    where INFO_ID = #{infoId,jdbcType=DECIMAL}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.ksource.liangfa.domain.CaseInformation" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jul 05 08:36:54 CST 2016.
    -->
    update CASE_INFORMATION
    set TITLE = #{title,jdbcType=VARCHAR},
      CASE_NO = #{caseNo,jdbcType=VARCHAR},
      CASE_NAME = #{caseName,jdbcType=VARCHAR},
      OPINION_DATE = #{opinionDate,jdbcType=TIMESTAMP},
      KEYWORD = #{keyword,jdbcType=VARCHAR},
      INPUTER = #{inputer,jdbcType=DECIMAL},
      INPUT_TIME = #{inputTime,jdbcType=TIMESTAMP},
      ATTACHMENT = #{attachment,jdbcType=DECIMAL},
      SOURCE = #{source,jdbcType=VARCHAR},
      HAPPENED_TIME = #{happenedTime,jdbcType=TIMESTAMP}
    where INFO_ID = #{infoId,jdbcType=DECIMAL}
  </update>
  
  <sql id="T_Column_List" >
    T.INFO_ID, T.TITLE,T.CASE_NO,T.CASE_NAME, T.OPINION_DATE, T.KEYWORD, T.INPUTER, T.INPUT_TIME,T.ATTACHMENT,T.SOURCE,T.HAPPENED_TIME
  </sql>
  <select id="getPaginationList" parameterType="java.util.Map" resultMap="BaseResultMap" >
    SELECT 
    <include refid="T_Column_List" />
    FROM CASE_INFORMATION T
    WHERE 1=1
    <if test="title != null and title !=''" >
     AND T.TITLE LIKE CONCAT(CONCAT('%',#{title}),'%')
    </if>
    <if test="keyword != null and keyword !=''" >
     AND T.KEYWORD LIKE CONCAT(CONCAT('%',#{keyword}),'%')
    </if>
    <if test="inputer != null and inputer !=''" >
     AND T.INPUTER =#{inputer}
    </if>
    <if test="caseName != null and caseName !=''" >
     AND T.CASE_NAME LIKE CONCAT(CONCAT('%',#{caseName}),'%')
    </if>
    <if test="happenedTime !=null and happenedTime !='' ">
      <![CDATA[AND T.HAPPENED_TIME=#{happenedTime,jdbcType=TIMESTAMP}]]>
    </if>    
    ORDER BY T.INPUT_TIME desc
  </select>
  <select id="getPaginationCount" parameterType="java.util.Map" resultType="java.lang.Integer" >
    SELECT COUNT(*) FROM CASE_INFORMATION T
     WHERE 1=1
    <if test="title != null and title !=''" >
     AND T.TITLE LIKE CONCAT(CONCAT('%',#{title}),'%')
    </if>
    <if test="inputer != null and inputer !=''" >
     AND T.INPUTER =#{inputer}
    </if>
    <if test="keyword != null and keyword !=''" >
     AND T.KEYWORD LIKE CONCAT(CONCAT('%',#{keyword}),'%')
    </if>
    <if test="caseName != null and caseName !=''" >
     AND T.CASE_NAME LIKE CONCAT(CONCAT('%',#{caseName}),'%')
    </if>
    <if test="happenedTime !=null and happenedTime !='' ">
      <![CDATA[AND T.HAPPENED_TIME=#{happenedTime,jdbcType=TIMESTAMP}]]>
    </if>    
  </select>
  
  
  <select id="getCaseInformationList" parameterType="java.util.Map" resultMap="BaseResultMap" >
    SELECT 
    <include refid="T_Column_List" />
    FROM CASE_INFORMATION T,organise o,user_ u 
    where t.inputer=u.user_id AND o.org_code=u.org_id
    <if test="districtId!=null and districtId!='' ">
		AND o.district_code like #{districtId} ||'%' 
	</if>
	<if test="startTime!= null and startTime!='' and startTime!='null'" >
           	AND T.INPUT_TIME &gt;= to_date(#{startTime},'yyyy-MM')
    </if>
    <if test="endTime!=null and endTime!='' and endTime!='null'" >
           AND 	T.INPUT_TIME &lt; to_date(#{endTime},'yyyy-MM')  +   interval   '1'  month
    </if>
    ORDER BY T.INPUT_TIME desc
  </select>
  <select id="getCaseInformationCount" parameterType="java.util.Map" resultType="java.lang.Integer" >
    SELECT COUNT(*) 
    FROM CASE_INFORMATION T,organise o,user_ u 
    where t.inputer=u.user_id AND o.org_code=u.org_id
    <if test="districtId!=null and districtId!='' ">
		AND o.district_code like #{districtId} ||'%'  
	</if>
	<if test="startTime!= null and startTime!='' and startTime!='null'" >
           	AND T.INPUT_TIME &gt;= to_date(#{startTime},'yyyy-MM')
    </if>
    <if test="endTime!=null and endTime!='' and endTime!='null'" >
           AND 	T.INPUT_TIME &lt; to_date(#{endTime},'yyyy-MM')  +   interval   '1'  month
    </if>
  </select>
</mapper>