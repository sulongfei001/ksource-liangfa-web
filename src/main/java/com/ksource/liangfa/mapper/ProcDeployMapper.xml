<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ksource.liangfa.mapper.ProcDeployMapper">
  <resultMap id="BaseResultMap" type="com.ksource.liangfa.domain.ProcDeploy">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Dec 31 11:15:30 CST 2011.
    -->
    <id column="PROC_DEF_ID" jdbcType="VARCHAR" property="procDefId" />
    <result column="PROC_DEPLOY_ID" jdbcType="DECIMAL" property="procDeployId" />
    <result column="PROC_DEF_KEY" jdbcType="VARCHAR" property="procDefKey" />
    <result column="PROC_DEF_NAME" jdbcType="VARCHAR" property="procDefName" />
    <result column="VERSION" jdbcType="DECIMAL" property="version" />
    <result column="CATEGORY" jdbcType="VARCHAR" property="category" />
    <result column="BPMN_FILE_NAME" jdbcType="VARCHAR" property="bpmnFileName" />
    <result column="PICT_FILE_NAME" jdbcType="VARCHAR" property="pictFileName" />
    <result column="DEPLOY_STATE" jdbcType="DECIMAL" property="deployState" />
    <result column="UPLOAD_DATE" jdbcType="DATE" property="uploadDate" />
    <result column="DEPLOY_DATE" jdbcType="DATE" property="deployDate" />
    <result column="TASK_FORM_STATE" jdbcType="DECIMAL" property="taskFormState" />
    <result column="FIRST_TASK_DEF_ID" jdbcType="VARCHAR" property="firstTaskDefId" />
  </resultMap>
  <resultMap extends="BaseResultMap" id="ResultMapWithBLOBs" type="com.ksource.liangfa.domain.ProcDeployWithBLOBs">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Dec 31 11:15:30 CST 2011.
    -->
    <result column="BPMN_FILE" jdbcType="BLOB" property="bpmnFile" />
    <result column="PICT_FILE" jdbcType="BLOB" property="pictFile" />
  </resultMap>
  <sql id="Example_Where_Clause">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Dec 31 11:15:30 CST 2011.
    -->
    <where>
      <foreach collection="oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Dec 31 11:15:30 CST 2011.
    -->
    <where>
      <foreach collection="example.oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Dec 31 11:15:30 CST 2011.
    -->
    PROC_DEF_ID, PROC_DEPLOY_ID, PROC_DEF_KEY, PROC_DEF_NAME, VERSION, CATEGORY, BPMN_FILE_NAME, 
    PICT_FILE_NAME, DEPLOY_STATE, UPLOAD_DATE, DEPLOY_DATE, TASK_FORM_STATE, FIRST_TASK_DEF_ID
  </sql>
  <sql id="Blob_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Dec 31 11:15:30 CST 2011.
    -->
    BPMN_FILE, PICT_FILE
  </sql>
  <select id="selectByExampleWithBLOBs" parameterType="com.ksource.liangfa.domain.ProcDeployExample" resultMap="ResultMapWithBLOBs">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Dec 31 11:15:30 CST 2011.
    -->
    select
    <if test="distinct">
      distinct
    </if>
    <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" />
    from PROC_DEPLOY
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null">
      order by ${orderByClause}
    </if>
  </select>
  <select id="selectByExample" parameterType="com.ksource.liangfa.domain.ProcDeployExample" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Dec 31 11:15:30 CST 2011.
    -->
    select
    <if test="distinct">
      distinct
    </if>
    <include refid="Base_Column_List" />
    from PROC_DEPLOY
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null">
      order by ${orderByClause}
    </if>
  </select>
  <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="ResultMapWithBLOBs">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Dec 31 11:15:30 CST 2011.
    -->
    select 
    <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" />
    from PROC_DEPLOY
    where PROC_DEF_ID = #{procDefId,jdbcType=VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Dec 31 11:15:30 CST 2011.
    -->
    delete from PROC_DEPLOY
    where PROC_DEF_ID = #{procDefId,jdbcType=VARCHAR}
  </delete>
  <delete id="deleteByExample" parameterType="com.ksource.liangfa.domain.ProcDeployExample">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Dec 31 11:15:30 CST 2011.
    -->
    delete from PROC_DEPLOY
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </delete>
  <insert id="insert" parameterType="com.ksource.liangfa.domain.ProcDeployWithBLOBs">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Dec 31 11:15:30 CST 2011.
    -->
    insert into PROC_DEPLOY (PROC_DEF_ID, PROC_DEPLOY_ID, PROC_DEF_KEY, 
      PROC_DEF_NAME, VERSION, CATEGORY, 
      BPMN_FILE_NAME, PICT_FILE_NAME, DEPLOY_STATE, 
      UPLOAD_DATE, DEPLOY_DATE, TASK_FORM_STATE, 
      FIRST_TASK_DEF_ID, BPMN_FILE, PICT_FILE
      )
    values (#{procDefId,jdbcType=VARCHAR}, #{procDeployId,jdbcType=DECIMAL}, #{procDefKey,jdbcType=VARCHAR}, 
      #{procDefName,jdbcType=VARCHAR}, #{version,jdbcType=DECIMAL}, #{category,jdbcType=VARCHAR}, 
      #{bpmnFileName,jdbcType=VARCHAR}, #{pictFileName,jdbcType=VARCHAR}, #{deployState,jdbcType=DECIMAL}, 
      #{uploadDate,jdbcType=DATE}, #{deployDate,jdbcType=DATE}, #{taskFormState,jdbcType=DECIMAL}, 
      #{firstTaskDefId,jdbcType=VARCHAR}, #{bpmnFile,jdbcType=BLOB}, #{pictFile,jdbcType=BLOB}
      )
  </insert>
  <insert id="insertSelective" parameterType="com.ksource.liangfa.domain.ProcDeployWithBLOBs">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Dec 31 11:15:30 CST 2011.
    -->
    insert into PROC_DEPLOY
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="procDefId != null">
        PROC_DEF_ID,
      </if>
      <if test="procDeployId != null">
        PROC_DEPLOY_ID,
      </if>
      <if test="procDefKey != null">
        PROC_DEF_KEY,
      </if>
      <if test="procDefName != null">
        PROC_DEF_NAME,
      </if>
      <if test="version != null">
        VERSION,
      </if>
      <if test="category != null">
        CATEGORY,
      </if>
      <if test="bpmnFileName != null">
        BPMN_FILE_NAME,
      </if>
      <if test="pictFileName != null">
        PICT_FILE_NAME,
      </if>
      <if test="deployState != null">
        DEPLOY_STATE,
      </if>
      <if test="uploadDate != null">
        UPLOAD_DATE,
      </if>
      <if test="deployDate != null">
        DEPLOY_DATE,
      </if>
      <if test="taskFormState != null">
        TASK_FORM_STATE,
      </if>
      <if test="firstTaskDefId != null">
        FIRST_TASK_DEF_ID,
      </if>
      <if test="bpmnFile != null">
        BPMN_FILE,
      </if>
      <if test="pictFile != null">
        PICT_FILE,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="procDefId != null">
        #{procDefId,jdbcType=VARCHAR},
      </if>
      <if test="procDeployId != null">
        #{procDeployId,jdbcType=DECIMAL},
      </if>
      <if test="procDefKey != null">
        #{procDefKey,jdbcType=VARCHAR},
      </if>
      <if test="procDefName != null">
        #{procDefName,jdbcType=VARCHAR},
      </if>
      <if test="version != null">
        #{version,jdbcType=DECIMAL},
      </if>
      <if test="category != null">
        #{category,jdbcType=VARCHAR},
      </if>
      <if test="bpmnFileName != null">
        #{bpmnFileName,jdbcType=VARCHAR},
      </if>
      <if test="pictFileName != null">
        #{pictFileName,jdbcType=VARCHAR},
      </if>
      <if test="deployState != null">
        #{deployState,jdbcType=DECIMAL},
      </if>
      <if test="uploadDate != null">
        #{uploadDate,jdbcType=DATE},
      </if>
      <if test="deployDate != null">
        #{deployDate,jdbcType=DATE},
      </if>
      <if test="taskFormState != null">
        #{taskFormState,jdbcType=DECIMAL},
      </if>
      <if test="firstTaskDefId != null">
        #{firstTaskDefId,jdbcType=VARCHAR},
      </if>
      <if test="bpmnFile != null">
        #{bpmnFile,jdbcType=BLOB},
      </if>
      <if test="pictFile != null">
        #{pictFile,jdbcType=BLOB},
      </if>
    </trim>
  </insert>
  <select id="countByExample" parameterType="com.ksource.liangfa.domain.ProcDeployExample" resultType="java.lang.Integer">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Dec 31 11:15:30 CST 2011.
    -->
    select count(*) from PROC_DEPLOY
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </select>
  <update id="updateByExampleSelective" parameterType="map">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Dec 31 11:15:30 CST 2011.
    -->
    update PROC_DEPLOY
    <set>
      <if test="record.procDefId != null">
        PROC_DEF_ID = #{record.procDefId,jdbcType=VARCHAR},
      </if>
      <if test="record.procDeployId != null">
        PROC_DEPLOY_ID = #{record.procDeployId,jdbcType=DECIMAL},
      </if>
      <if test="record.procDefKey != null">
        PROC_DEF_KEY = #{record.procDefKey,jdbcType=VARCHAR},
      </if>
      <if test="record.procDefName != null">
        PROC_DEF_NAME = #{record.procDefName,jdbcType=VARCHAR},
      </if>
      <if test="record.version != null">
        VERSION = #{record.version,jdbcType=DECIMAL},
      </if>
      <if test="record.category != null">
        CATEGORY = #{record.category,jdbcType=VARCHAR},
      </if>
      <if test="record.bpmnFileName != null">
        BPMN_FILE_NAME = #{record.bpmnFileName,jdbcType=VARCHAR},
      </if>
      <if test="record.pictFileName != null">
        PICT_FILE_NAME = #{record.pictFileName,jdbcType=VARCHAR},
      </if>
      <if test="record.deployState != null">
        DEPLOY_STATE = #{record.deployState,jdbcType=DECIMAL},
      </if>
      <if test="record.uploadDate != null">
        UPLOAD_DATE = #{record.uploadDate,jdbcType=DATE},
      </if>
      <if test="record.deployDate != null">
        DEPLOY_DATE = #{record.deployDate,jdbcType=DATE},
      </if>
      <if test="record.taskFormState != null">
        TASK_FORM_STATE = #{record.taskFormState,jdbcType=DECIMAL},
      </if>
      <if test="record.firstTaskDefId != null">
        FIRST_TASK_DEF_ID = #{record.firstTaskDefId,jdbcType=VARCHAR},
      </if>
      <if test="record.bpmnFile != null">
        BPMN_FILE = #{record.bpmnFile,jdbcType=BLOB},
      </if>
      <if test="record.pictFile != null">
        PICT_FILE = #{record.pictFile,jdbcType=BLOB},
      </if>
    </set>
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExampleWithBLOBs" parameterType="map">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Dec 31 11:15:30 CST 2011.
    -->
    update PROC_DEPLOY
    set PROC_DEF_ID = #{record.procDefId,jdbcType=VARCHAR},
      PROC_DEPLOY_ID = #{record.procDeployId,jdbcType=DECIMAL},
      PROC_DEF_KEY = #{record.procDefKey,jdbcType=VARCHAR},
      PROC_DEF_NAME = #{record.procDefName,jdbcType=VARCHAR},
      VERSION = #{record.version,jdbcType=DECIMAL},
      CATEGORY = #{record.category,jdbcType=VARCHAR},
      BPMN_FILE_NAME = #{record.bpmnFileName,jdbcType=VARCHAR},
      PICT_FILE_NAME = #{record.pictFileName,jdbcType=VARCHAR},
      DEPLOY_STATE = #{record.deployState,jdbcType=DECIMAL},
      UPLOAD_DATE = #{record.uploadDate,jdbcType=DATE},
      DEPLOY_DATE = #{record.deployDate,jdbcType=DATE},
      TASK_FORM_STATE = #{record.taskFormState,jdbcType=DECIMAL},
      FIRST_TASK_DEF_ID = #{record.firstTaskDefId,jdbcType=VARCHAR},
      BPMN_FILE = #{record.bpmnFile,jdbcType=BLOB},
      PICT_FILE = #{record.pictFile,jdbcType=BLOB}
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExample" parameterType="map">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Dec 31 11:15:30 CST 2011.
    -->
    update PROC_DEPLOY
    set PROC_DEF_ID = #{record.procDefId,jdbcType=VARCHAR},
      PROC_DEPLOY_ID = #{record.procDeployId,jdbcType=DECIMAL},
      PROC_DEF_KEY = #{record.procDefKey,jdbcType=VARCHAR},
      PROC_DEF_NAME = #{record.procDefName,jdbcType=VARCHAR},
      VERSION = #{record.version,jdbcType=DECIMAL},
      CATEGORY = #{record.category,jdbcType=VARCHAR},
      BPMN_FILE_NAME = #{record.bpmnFileName,jdbcType=VARCHAR},
      PICT_FILE_NAME = #{record.pictFileName,jdbcType=VARCHAR},
      DEPLOY_STATE = #{record.deployState,jdbcType=DECIMAL},
      UPLOAD_DATE = #{record.uploadDate,jdbcType=DATE},
      DEPLOY_DATE = #{record.deployDate,jdbcType=DATE},
      TASK_FORM_STATE = #{record.taskFormState,jdbcType=DECIMAL},
      FIRST_TASK_DEF_ID = #{record.firstTaskDefId,jdbcType=VARCHAR}
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByPrimaryKeySelective" parameterType="com.ksource.liangfa.domain.ProcDeployWithBLOBs">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Dec 31 11:15:30 CST 2011.
    -->
    update PROC_DEPLOY
    <set>
      <if test="procDeployId != null">
        PROC_DEPLOY_ID = #{procDeployId,jdbcType=DECIMAL},
      </if>
      <if test="procDefKey != null">
        PROC_DEF_KEY = #{procDefKey,jdbcType=VARCHAR},
      </if>
      <if test="procDefName != null">
        PROC_DEF_NAME = #{procDefName,jdbcType=VARCHAR},
      </if>
      <if test="version != null">
        VERSION = #{version,jdbcType=DECIMAL},
      </if>
      <if test="category != null">
        CATEGORY = #{category,jdbcType=VARCHAR},
      </if>
      <if test="bpmnFileName != null">
        BPMN_FILE_NAME = #{bpmnFileName,jdbcType=VARCHAR},
      </if>
      <if test="pictFileName != null">
        PICT_FILE_NAME = #{pictFileName,jdbcType=VARCHAR},
      </if>
      <if test="deployState != null">
        DEPLOY_STATE = #{deployState,jdbcType=DECIMAL},
      </if>
      <if test="uploadDate != null">
        UPLOAD_DATE = #{uploadDate,jdbcType=DATE},
      </if>
      <if test="deployDate != null">
        DEPLOY_DATE = #{deployDate,jdbcType=DATE},
      </if>
      <if test="taskFormState != null">
        TASK_FORM_STATE = #{taskFormState,jdbcType=DECIMAL},
      </if>
      <if test="firstTaskDefId != null">
        FIRST_TASK_DEF_ID = #{firstTaskDefId,jdbcType=VARCHAR},
      </if>
      <if test="bpmnFile != null">
        BPMN_FILE = #{bpmnFile,jdbcType=BLOB},
      </if>
      <if test="pictFile != null">
        PICT_FILE = #{pictFile,jdbcType=BLOB},
      </if>
    </set>
    where PROC_DEF_ID = #{procDefId,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKeyWithBLOBs" parameterType="com.ksource.liangfa.domain.ProcDeployWithBLOBs">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Dec 31 11:15:30 CST 2011.
    -->
    update PROC_DEPLOY
    set PROC_DEPLOY_ID = #{procDeployId,jdbcType=DECIMAL},
      PROC_DEF_KEY = #{procDefKey,jdbcType=VARCHAR},
      PROC_DEF_NAME = #{procDefName,jdbcType=VARCHAR},
      VERSION = #{version,jdbcType=DECIMAL},
      CATEGORY = #{category,jdbcType=VARCHAR},
      BPMN_FILE_NAME = #{bpmnFileName,jdbcType=VARCHAR},
      PICT_FILE_NAME = #{pictFileName,jdbcType=VARCHAR},
      DEPLOY_STATE = #{deployState,jdbcType=DECIMAL},
      UPLOAD_DATE = #{uploadDate,jdbcType=DATE},
      DEPLOY_DATE = #{deployDate,jdbcType=DATE},
      TASK_FORM_STATE = #{taskFormState,jdbcType=DECIMAL},
      FIRST_TASK_DEF_ID = #{firstTaskDefId,jdbcType=VARCHAR},
      BPMN_FILE = #{bpmnFile,jdbcType=BLOB},
      PICT_FILE = #{pictFile,jdbcType=BLOB}
    where PROC_DEF_ID = #{procDefId,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.ksource.liangfa.domain.ProcDeploy">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Dec 31 11:15:30 CST 2011.
    -->
    update PROC_DEPLOY
    set PROC_DEPLOY_ID = #{procDeployId,jdbcType=DECIMAL},
      PROC_DEF_KEY = #{procDefKey,jdbcType=VARCHAR},
      PROC_DEF_NAME = #{procDefName,jdbcType=VARCHAR},
      VERSION = #{version,jdbcType=DECIMAL},
      CATEGORY = #{category,jdbcType=VARCHAR},
      BPMN_FILE_NAME = #{bpmnFileName,jdbcType=VARCHAR},
      PICT_FILE_NAME = #{pictFileName,jdbcType=VARCHAR},
      DEPLOY_STATE = #{deployState,jdbcType=DECIMAL},
      UPLOAD_DATE = #{uploadDate,jdbcType=DATE},
      DEPLOY_DATE = #{deployDate,jdbcType=DATE},
      TASK_FORM_STATE = #{taskFormState,jdbcType=DECIMAL},
      FIRST_TASK_DEF_ID = #{firstTaskDefId,jdbcType=VARCHAR}
    where PROC_DEF_ID = #{procDefId,jdbcType=VARCHAR}
  </update>
  
  <resultMap id="procDeployAndKey" type="com.ksource.liangfa.domain.ProcDeploy">
  	<id column="PROC_DEF_ID" jdbcType="VARCHAR" property="procDefId" />
    <result column="PROC_DEPLOY_ID" jdbcType="DECIMAL" property="procDeployId" />
    <!-- <result column="PROC_DEF_KEY" jdbcType="VARCHAR" property="procDefKey" /> -->
    <result column="PROC_DEF_NAME" jdbcType="VARCHAR" property="procDefName" />
    <result column="VERSION" jdbcType="DECIMAL" property="version" />
    <result column="BPMN_FILE_NAME" jdbcType="VARCHAR" property="bpmnFileName" />
    <result column="PICT_FILE_NAME" jdbcType="VARCHAR" property="pictFileName" />
    <result column="DEPLOY_STATE" jdbcType="DECIMAL" property="deployState" />
    <result column="UPLOAD_DATE" jdbcType="DATE" property="uploadDate" />
    <result column="DEPLOY_DATE" jdbcType="DATE" property="deployDate" />
    <result column="TASK_FORM_STATE" jdbcType="DECIMAL" property="taskFormState" />
    <association column="PROC_DEF_KEY" javaType="com.ksource.liangfa.domain.ProcKey" property="procKey">
    	<id column="PROC_KEY" property="procKey" />
    	<result column="PROC_KEY_NAME" property="procKeyName" />
    	<result column="CUR_VERSION" property="curVersion" />
    	<result column="UPLOAD_STATE" property="uploadState" />
    	<result column="PROC_KEY_DEPLOY_STATE" property="deployState" />
    </association>
  </resultMap>
  <select id="getPaginationList" parameterType="map" resultMap="procDeployAndKey">
  	select 
  	A.PROC_DEF_ID, A.PROC_DEPLOY_ID,  A.PROC_DEF_NAME, A.VERSION, A.BPMN_FILE_NAME, 
    A.PICT_FILE_NAME, A.DEPLOY_STATE, A.UPLOAD_DATE, A.DEPLOY_DATE, A.TASK_FORM_STATE,
    A.PROC_DEF_KEY,B.PROC_KEY, B.PROC_KEY_NAME, B.CUR_VERSION, B.UPLOAD_STATE,B.DEPLOY_STATE AS PROC_KEY_DEPLOY_STATE
    from PROC_DEPLOY A, PROC_KEY B
    WHERE A.PROC_DEF_KEY=B.PROC_KEY
	<if test="procDefKey!=null and procDefKey!=''">
		AND A.PROC_DEF_KEY=#{procDefKey}
	</if>    
	<if test="deployState!=null">
		AND A.DEPLOY_STATE=#{deployState}
	</if>    
	<if test="taskFormState!=null">
		AND A.TASK_FORM_STATE=#{taskFormState}
	</if>
      order by proc_def_name,version desc
  </select>
  <select id="getPaginationCount" parameterType="map" resultType="int">
  	select count(*)
    from PROC_DEPLOY A
    <where>
    1=1
    <if test="procDefKey!=null and procDefKey!=''" >
		AND A.PROC_DEF_KEY=#{procDefKey} 
	</if>    
	<if test="deployState!=null">
		AND A.DEPLOY_STATE=#{deployState}
	</if>    
	<if test="taskFormState!=null">
		AND A.TASK_FORM_STATE=#{taskFormState}
	</if>
    </where>
  </select>
  
  <select id="getMaxVersionProc" resultMap="BaseResultMap">
  	select b.* from proc_deploy b where b.version in (select max(a.version) from proc_deploy a)
  </select>
</mapper>